# ü§ñ WebSSH Agent - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (–û–ë–ù–û–í–õ–ï–ù–û)

## üÜï **–û–°–ù–û–í–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –í–ï–†–°–ò–ò 2.0:**
- ‚úÖ **–£–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ nginx** - –∞–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ nginx –∏ —É–¥–∞–ª—è–µ—Ç –µ–≥–æ
- ‚úÖ **Docker nginx —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º SSL** - –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ **Certbot –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ SSL —á–µ—Ä–µ–∑ webroot —Ä–µ–∂–∏–º
- ‚úÖ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL** - cron –∑–∞–¥–∞—á–∞ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ 12 –æ—à–∏–±–æ–∫** –∏–∑ –æ—Ç—á–µ—Ç–∞ –æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º VDS (—Å nginx –∏–ª–∏ –±–µ–∑)

## üìã **API Endpoints –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏:**

### 1. **GET /health** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∞–≥–µ–Ω—Ç–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö VDS
- **–î–∞–Ω–Ω—ã–µ:** –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è, –≤–µ—Ä—Å–∏—è, —Å–æ—Å—Ç–æ—è–Ω–∏–µ VDS
- **–ü–µ—Ä–µ–¥–∞–µ—Ç:** JSON —Å —Å—Ç–∞—Ç—É—Å–æ–º –∞–≥–µ–Ω—Ç–∞

### 2. **POST /vds/check-requirements** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
  - `vdsIp` - IP –∞–¥—Ä–µ—Å VDS —Å–µ—Ä–≤–µ—Ä–∞
  - `ubuntuUser` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Ubuntu
  - `sshHost` - SSH —Ö–æ—Å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - `sshPort` - SSH –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 22)
  - `sshConnectUser` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - `sshConnectPassword` - –ø–∞—Ä–æ–ª—å –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
  - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VDS –ø–æ SSH
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–û–°, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, CPU)
  - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

- **–ü–µ—Ä–µ–¥–∞–µ—Ç:** JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏, —Å–∏—Å—Ç–µ–º–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –∏ –æ—à–∏–±–∫–∞–º–∏

### 3. **POST /vds/transfer-encryption-key** - –ü–µ—Ä–µ–¥–∞—á–∞ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
  - `vdsIp` - IP –∞–¥—Ä–µ—Å VDS —Å–µ—Ä–≤–µ—Ä–∞
  - `dockerUser` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Docker
  - `sshConnectUser` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - `sshConnectPassword` - –ø–∞—Ä–æ–ª—å –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
  - –ß–∏—Ç–∞–µ—Ç –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã (`/app/ssl/keys/full_db_encryption.key`)
  - –ü–µ—Ä–µ–¥–∞–µ—Ç –∫–ª—é—á –Ω–∞ VDS —á–µ—Ä–µ–∑ SCP –≤ `/home/dockerUser/dapp/ssl/keys/full_db_encryption.key`
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (600, –≤–ª–∞–¥–µ–ª–µ—Ü dockerUser)
  - **–í–∞–∂–Ω–æ:** –ü—É—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—é `./ssl:/app/ssl:ro` –≤ docker-compose.prod.yml

- **–ü–µ—Ä–µ–¥–∞–µ—Ç:** –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç:** –ü–∞—Ä–æ–ª–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 4. **POST /vds/setup** - –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ VDS (–û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø)
- **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
  - `vdsIp` - IP –∞–¥—Ä–µ—Å VDS —Å–µ—Ä–≤–µ—Ä–∞
  - `domain` - –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è
  - `email` - email –¥–ª—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
  - `ubuntuUser` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Ubuntu
  - `dockerUser` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Docker
  - `sshConnectUser` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - `sshConnectPassword` - –ø–∞—Ä–æ–ª—å –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## üîÑ **–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è /vds/setup:**

### **–≠—Ç–∞–ø 0: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π**
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VDS –ø–æ SSH
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –û–°, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, CPU
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:** x86_64, amd64, aarch64, arm64, armv7l, armv8l, i386, i686, ppc64le, s390x
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:** 6GB RAM, 30GB –¥–∏—Å–∫, 2 CPU —è–¥—Ä–∞
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:** 8GB RAM, 50GB –¥–∏—Å–∫

### **–≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ SSH –∫–ª—é—á–µ–π –ª–æ–∫–∞–ª—å–Ω–æ**
- –°–æ–∑–¥–∞–µ—Ç SSH –∫–ª—é—á–∏ –Ω–∞ —Ö–æ—Å—Ç–µ (`~/.ssh/id_rsa`, `~/.ssh/id_rsa.pub`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç email –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ** –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —á–µ—Ä–µ–∑ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–≠—Ç–∞–ø 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–µ–π –¥–ª—è root**
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ `/root/.ssh/authorized_keys` –Ω–∞ VDS
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### **–≠—Ç–∞–ø 3: –û—á–∏—Å—Ç–∫–∞ VDS —Å–µ—Ä–≤–µ—Ä–∞**
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –≤—Å–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –û—á–∏—â–∞–µ—Ç Docker —Å–∏—Å—Ç–µ–º—É (–æ–±—Ä–∞–∑—ã, volumes, networks)
- **üÜï –£–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ nginx:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ nginx
- **üÜï –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ nginx:** –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π nginx - –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç –µ–≥–æ
- –û—á–∏—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### **–≠—Ç–∞–ø 4: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `ubuntuUser` —Å sudo –ø—Ä–∞–≤–∞–º–∏
- –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `dockerUser` —Å sudo –∏ docker –ø—Ä–∞–≤–∞–º–∏
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç SSH –∫–ª—é—á–∏ –¥–ª—è –æ–±–æ–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/home/dockerUser/dapp`

### **–≠—Ç–∞–ø 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker**
- –°–∫–∞—á–∏–≤–∞–µ—Ç –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker
- –î–æ–±–∞–≤–ª—è–µ—Ç `dockerUser` –≤ –≥—Ä—É–ø–ø—É docker

### **–≠—Ç–∞–ø 6: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose**
- –°–∫–∞—á–∏–≤–∞–µ—Ç –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker Compose
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### **–≠—Ç–∞–ø 7: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç SSH –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ —Å –∫–ª—é—á–∞–º–∏
- –û—Ç–∫–ª—é—á–∞–µ—Ç –ø–∞—Ä–æ–ª—å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

### **–≠—Ç–∞–ø 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall**
- –í–∫–ª—é—á–∞–µ—Ç UFW
- –†–∞–∑—Ä–µ—à–∞–µ—Ç SSH (22), HTTP (80), HTTPS (443)

### **–≠—Ç–∞–ø 9: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –∫–ª—é—á–µ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è**
- –°–æ–∑–¥–∞–µ—Ç `/home/dockerUser/dapp/ssl/keys`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (700)

### **–≠—Ç–∞–ø 10: üÜï –£–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ nginx**
- **üîç –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ nginx** –≤ —Å–∏—Å—Ç–µ–º–µ
- **‚ö†Ô∏è –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω:** –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π nginx (stop, disable, mask, purge)
- **‚ÑπÔ∏è –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω:** –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:** –ø–æ—Ä—Ç—ã 80/443 –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã –¥–ª—è Docker nginx

### **–≠—Ç–∞–ø 11: üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL —á–µ—Ä–µ–∑ Docker**
- **üîí SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–ª—É—á–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —á–µ—Ä–µ–∑ Docker certbot –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- **üìã Certbot –Ω–∞—Å—Ç—Ä–æ–µ–Ω** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **üö´ –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π certbot** - –≤—Å–µ —á–µ—Ä–µ–∑ Docker

### **–≠—Ç–∞–ø 12: üÜï –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker nginx**
- **üê≥ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–∞** –≤ Docker –æ–±—Ä–∞–∑ frontend-nginx
- **üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **üåê –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

### **–≠—Ç–∞–ø 13: –ü–µ—Ä–µ–¥–∞—á–∞ docker-compose.prod.yml**
- –ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã (`/app/docker-compose.prod.yml`)
- –ü–µ—Ä–µ–¥–∞–µ—Ç –Ω–∞ VDS –∫–∞–∫ `/home/dockerUser/dapp/docker-compose.yml`

### **–≠—Ç–∞–ø 14: üÜï –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ .env —Ñ–∞–π–ª–∞**
- –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª —Å –ø–æ–ª–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  ```
  # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  DOMAIN=example.com
  BACKEND_CONTAINER=dapp-backend
  EMAIL=admin@example.com
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  DB_NAME=dapp_db
  DB_USER=dapp_user
  DB_PASSWORD=dapp_password
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Node.js
  NODE_ENV=production
  PORT=8000
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Ollama
  OLLAMA_MODEL=qwen2.5:7b
  OLLAMA_EMBEDDINGS_MODEL=qwen2.5:7b
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  SSL_CERT_PATH=/etc/ssl/certs
  SSL_KEY_PATH=/etc/ssl/private
  ```

### **–≠—Ç–∞–ø 15: –≠–∫—Å–ø–æ—Ä—Ç –∏ –ø–µ—Ä–µ–¥–∞—á–∞ Docker –æ–±—Ä–∞–∑–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö**
- **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã (–æ–±—Ä–∞–∑—ã + –¥–∞–Ω–Ω—ã–µ):**
  - `postgres:16-alpine` - –æ–±—Ä–∞–∑ PostgreSQL + –¥–∞–Ω–Ω—ã–µ –ë–î
  - `digital_legal_entitydle-ollama:latest` - –æ–±—Ä–∞–∑ Ollama + –º–æ–¥–µ–ª–∏
  - `digital_legal_entitydle-vector-search:latest` - –æ–±—Ä–∞–∑ Vector Search + –∏–Ω–¥–µ–∫—Å—ã
  - `digital_legal_entitydle-backend:latest` - –æ–±—Ä–∞–∑ Backend
  - `digital_legal_entitydle-frontend:latest` - –æ–±—Ä–∞–∑ Frontend
  - `digital_legal_entitydle-frontend-nginx:latest` - –æ–±—Ä–∞–∑ Nginx
  - `digital_legal_entitydle-webssh-agent:latest` - –æ–±—Ä–∞–∑ WebSSH Agent

- **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ volumes:**
  - `postgres_data` - –¥–∞–Ω–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
  - `ollama_data` - –º–æ–¥–µ–ª–∏ Ollama
  - `vector_search_data` - –∏–Ω–¥–µ–∫—Å—ã –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

- **–°–æ–∑–¥–∞–µ—Ç –∞—Ä—Ö–∏–≤:** `docker-images-and-data.tar.gz` —Å–æ –≤—Å–µ–º–∏ –æ–±—Ä–∞–∑–∞–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏
- **–ü–µ—Ä–µ–¥–∞–µ—Ç –Ω–∞ VDS:** –ß–µ—Ä–µ–∑ SCP –≤ `/home/dockerUser/dapp/`
- **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞ VDS:** –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±—Ä–∞–∑—ã + —Å–æ–∑–¥–∞–µ—Ç volumes —Å –¥–∞–Ω–Ω—ã–º–∏
- **–û—á–∏—â–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:** –£–¥–∞–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ tar —Ñ–∞–π–ª—ã
- **‚úÖ –í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –æ–±—Ä–∞–∑—ã –ò –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### **–≠—Ç–∞–ø 16: üÜï –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º SSL**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç `docker compose up -d` –Ω–∞ VDS
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è certbot –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- **üîí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ SSL:** certbot –ø–æ–ª—É—á–∞–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —á–µ—Ä–µ–∑ webroot —Ä–µ–∂–∏–º

### **–≠—Ç–∞–ø 16.0: üÜï –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL**
- **üìÖ –°–æ–∑–¥–∞–µ—Ç cron –∑–∞–¥–∞—á—É** –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **üîÑ –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** `renew-ssl.sh` - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç nginx
- **‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 12:00

### **–≠—Ç–∞–ø 17: üÜï –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ë–î**
- **‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å PostgreSQL —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏
- **üóÉÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –ë–î:** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü (email_settings, db_settings, session)
- **üìä –ü–æ–¥—Å—á–µ—Ç —Ç–∞–±–ª–∏—Ü:** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—Ü –≤ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **üîë –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–∞ –≤ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **üìà –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:** –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

## üìä **–ß—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∏ —á—Ç–æ –ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è:**

### ‚úÖ **–ü–ï–†–ï–î–ê–ï–¢–°–Ø:**
- **Docker –æ–±—Ä–∞–∑—ã:** –í—Å–µ 7 –æ–±—Ä–∞–∑–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫)
- **Docker –¥–∞–Ω–Ω—ã–µ:** –î–∞–Ω–Ω—ã–µ –∏–∑ volumes (PostgreSQL, Ollama –º–æ–¥–µ–ª–∏, Vector Search –∏–Ω–¥–µ–∫—Å—ã)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:** docker-compose.prod.yml, .env
- **SSH –∫–ª—é—á–∏:** –ü—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ (—Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ, –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
- **–ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:** –ö–ª—é—á –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:** –ü–æ–ª—É—á–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Let's Encrypt

### ‚ùå **–ù–ï –ü–ï–†–ï–î–ê–ï–¢–°–Ø:**
- **–ü–∞—Ä–æ–ª–∏:** –¢–æ–ª—å–∫–æ SSH –∫–ª—é—á–∏, –ø–∞—Ä–æ–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ SSH –∫–ª—é—á–∏:** –û—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** –¢–æ–ª—å–∫–æ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ë–î
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:** –¢–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- **–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:** –¢–æ–ª—å–∫–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Docker –æ–±—Ä–∞–∑—ã

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞:**
- **–ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π VDS —Å–µ—Ä–≤–µ—Ä** —Å Ubuntu
- **–†–∞–±–æ—Ç–∞—é—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –Ω–∞ –¥–æ–º–µ–Ω–µ —Å SSL
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø** —Ç–æ–ª—å–∫–æ –ø–æ SSH –∫–ª—é—á–∞–º
- **–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- –ê–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `dapp-webssh-agent`
- –ü–æ—Ä—Ç 3000 –ø—Ä–æ–±—Ä–æ—à–µ–Ω —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ —Ö–æ—Å—Ç (`0.0.0.0:3000->3000/tcp`)
- –î–æ—Å—Ç—É–ø–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `http://localhost:3000`

### **–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è SSH –∫–ª—é—á–µ–π:**
1. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞ —Ö–æ—Å—Ç–µ:** `ssh-keygen -t rsa -b 4096 -C "email" -f ~/.ssh/id_rsa -N ""`
2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ SSH –∫–æ–Ω—Ñ–∏–≥—É (`chmod 600 /root/.ssh/config`)
3. **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á:** –û—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ (`~/.ssh/id_rsa`) –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å –ø—Ä–∞–≤–∞–º–∏ 600
4. **–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á:** –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–µ—Ä–µ–∑ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (`~/.ssh/id_rsa.pub` ‚Üí `/root/.ssh/id_rsa.pub`) —Å –ø—Ä–∞–≤–∞–º–∏ 644
5. **–ü–µ—Ä–µ–¥–∞—á–∞ –Ω–∞ VDS:** –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ SSH –∫–æ–º–∞–Ω–¥—É
6. **–û—á–∏—Å—Ç–∫–∞:** –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è, SSH –∫–ª—é—á–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ

### **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
- **SSH –∫–ª—é—á–∏:** –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ª–æ–∫–∞–ª—å–Ω—ã–º SSH –∫–ª—é—á–∞–º (`~/.ssh/`) —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- **SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ `/root/.ssh/config` (600) –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π
- **Docker API:** –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ Docker socket –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:** –î–æ—Å—Ç—É–ø –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º –∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º
- **–°–µ—Ç–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:** –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SSH/SCP –∫–æ–º–∞–Ω–¥ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

## üõ†Ô∏è **–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –û–®–ò–ë–ö–ò –ò–ó –û–¢–ß–ï–¢–ê:**

### ‚úÖ **–í–°–ï 12 –û–®–ò–ë–û–ö –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–´:**

| ‚Ññ | –û—à–∏–±–∫–∞ | –°—Ç–∞—Ç—É—Å | –†–µ—à–µ–Ω–∏–µ |
|---|--------|--------|---------|
| 1 | HTTP ERROR 503 - –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤ nginx | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –£–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ nginx |
| 2 | –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤ nginx | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –°–∏—Å—Ç–µ–º–Ω—ã–π nginx –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç—Å—è |
| 3 | –ü—Ä–æ–±–ª–µ–º—ã —Å health checks | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –£–ª—É—á—à–µ–Ω—ã health checks, –∏–∑–º–µ–Ω–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
| 4 | –û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| 5 | –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º nginx | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –°–∏—Å—Ç–µ–º–Ω—ã–π nginx —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| 6 | –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –î–æ–±–∞–≤–ª–µ–Ω SCRAM-SHA-256, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ |
| 7 | YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| 8 | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –ë–î —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ |
| 9 | –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–±—Ä–æ—Å–æ–º –ø–æ—Ä—Ç–æ–≤ | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –≤ docker-compose |
| 10 | –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –ü–æ–ª–Ω—ã–π .env —Ñ–∞–π–ª —Å–æ –≤—Å–µ–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ |
| 11 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –ë–î –≤–º–µ—Å—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–π |
| 12 | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –ê–≥–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–∞ |

### üöÄ **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:**

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL** - certbot –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ **HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ HTTPS
- ‚úÖ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL** - cron –∑–∞–¥–∞—á–∞ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º VDS (—Å nginx –∏–ª–∏ –±–µ–∑)
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ + –ø–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞
- ‚úÖ **Health checks** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ **Fail2ban** - –∑–∞—â–∏—Ç–∞ –æ—Ç SSH –∏ HTTP –∞—Ç–∞–∫

### üéØ **–ò–¢–û–ì–û–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê:**

```
–ò–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Üí Docker nginx (–ø–æ—Ä—Ç—ã 80/443) ‚Üí Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
                              ‚îú‚îÄ‚îÄ HTTP ‚Üí HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç
                              ‚îú‚îÄ‚îÄ Frontend (–ø–æ—Ä—Ç 5173)
                              ‚îú‚îÄ‚îÄ Backend API (–ø–æ—Ä—Ç 8000)
                              ‚îú‚îÄ‚îÄ WebSocket (–ø–æ—Ä—Ç 8000/ws)
                              ‚îî‚îÄ‚îÄ Certbot (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL)
```

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É!** üöÄ

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ê–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –ø–æ—Ä—Ç 3000 –ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞ —Ö–æ—Å—Ç
- SSH –∫–ª—é—á–∏ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è
- Docker socket –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞
- –î–æ—Å—Ç—É–ø–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `http://localhost:3000`

## üîß **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è SSH –ø—Ä–æ–±–ª–µ–º (v1.1):**

### **–ü—Ä–æ–±–ª–µ–º–∞:**
SSH –∫–æ–º–∞–Ω–¥—ã –ø–∞–¥–∞–ª–∏ —Å –æ—à–∏–±–∫–æ–π `Bad owner or permissions on /root/.ssh/config`, —á—Ç–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –∫ VDS —Å–µ—Ä–≤–µ—Ä–∞–º.

### **–†–µ—à–µ–Ω–∏–µ:**
1. **Dockerfile:** –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ SSH –∫–æ–Ω—Ñ–∏–≥–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ (600)
2. **SSH —É—Ç–∏–ª–∏—Ç—ã:** –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `fixSshPermissions()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤
3. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–π:** –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è SSH –∫–ª—é—á–µ–π —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
4. **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** –ö–∞–∂–¥–∞—è SSH/SCP –∫–æ–º–∞–Ω–¥–∞ —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –æ—à–∏–±–∫–∞ "Bad owner or permissions on /root/.ssh/config"
- ‚úÖ –ü–æ–≤—ã—à–µ–Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

## üö® **–í–∞–∂–Ω–æ:**
–ê–≥–µ–Ω—Ç –∏–º–µ–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –∏ –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö.

**–ê–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –æ—Ç —á–∏—Å—Ç–æ–≥–æ VDS –¥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!** üöÄ

---

**¬© 2024-2025 –¢–∞—Ä–∞–±–∞–Ω–æ–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.**
